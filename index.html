<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LightHouse Astro - Your Guide in the Stars</title>
    <link rel="icon" href="images/logo.png" type="image/jpeg">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <style>
        /* --- LAYOUT & THEME SETUP --- */
        html, body { 
            height: 100%; 
            scroll-behavior: smooth;
        }
        body {
            display: flex;
            flex-direction: column;
            font-family: 'Poppins', sans-serif;
            transition: background-color 0.5s ease, color 0.5s ease;
            overflow-x: hidden;
        }
        main { flex-grow: 1; }

        /* --- DARK MODE (DEFAULT) --- */
        :root {
            --bg-color: #0a0a0a;
            --text-color: #f3f3f3;
            --accent-color: #D4C5A3;
            --accent-light: #E5D9B6;
            --accent-dark: #B8A378;
            --card-bg: #1a1a1a;
            --header-bg: rgba(10, 10, 10, 0.9);
            --border-color: rgba(212, 197, 163, 0.2);
            --section-bg: #141414;
            --input-bg: #0a0a0a;
            --placeholder-color: #9ca3af;
            --gradient-start: rgba(212, 197, 163, 0.1);
            --gradient-end: rgba(212, 197, 163, 0.05);
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Lora', serif;
            color: var(--accent-color);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, var(--accent-color) 0%, var(--accent-light) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .themed-card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .themed-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            border-color: var(--accent-color);
        }
        
        .nav-link { 
            color: var(--text-color); 
            position: relative;
            transition: color 0.3s ease;
        }
        .nav-link.active, .nav-link:hover { color: var(--accent-color); }
        .nav-link::after { 
            content: ''; 
            position: absolute; 
            width: 0; 
            height: 2px; 
            bottom: -5px; 
            left: 50%; 
            transform: translateX(-50%); 
            transition: width 0.3s ease; 
            background: var(--accent-color);
        }
        .nav-link.active::after, .nav-link:hover::after { width: 100%; }
        
        .themed-btn {
            background: linear-gradient(135deg, var(--accent-color) 0%, var(--accent-dark) 100%);
            color: #000000;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(212, 197, 163, 0.3);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .themed-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(212, 197, 163, 0.4);
        }
        
        .themed-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .themed-btn:hover::after {
            left: 100%;
        }
        
        /* --- LIGHT MODE --- */
        body.light-mode {
            --bg-color: #f8f5ef;
            --text-color: #332e22;
            --accent-color: #a5895a;
            --accent-light: #B8A378;
            --accent-dark: #8A744A;
            --card-bg: #ffffff;
            --header-bg: rgba(248, 245, 239, 0.9);
            --border-color: rgba(165, 137, 90, 0.2);
            --section-bg: #f0ebe4;
            --input-bg: #ffffff;
            --placeholder-color: #6b6354;
            --gradient-start: rgba(165, 137, 90, 0.1);
            --gradient-end: rgba(165, 137, 90, 0.05);
        }
        
        /* --- GENERAL STYLES --- */
        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes shimmer {
            0% { background-position: -200px 0; }
            100% { background-position: 200px 0; }
        }
        
        .fade-in { animation: fadeIn 0.8s ease-out forwards; }
        .float { animation: float 6s ease-in-out infinite; }
        
        .hidden-section { display: none; }
        .active-section { display: block; animation: fadeIn 0.5s ease-in-out; }
        
        #hero-carousel { 
            position: relative; 
            height: 550px; 
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }
        
        .carousel-slide {
            position: absolute;
            inset: 0;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            pointer-events: none;
        }
        
        .carousel-slide.active {
            opacity: 1;
            pointer-events: auto;
        }
        
        .carousel-slide::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.7) 100%);
            z-index: 1;
        }
        
        .carousel-slide .relative {
            z-index: 2;
        }
        
        /* Carousel Navigation Arrows - Clean Design */
        .carousel-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: transparent;
            border: none;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            color: var(--accent-color);
        }
        
        .carousel-arrow:hover {
            transform: translateY(-50%) scale(1.2);
            color: var(--accent-light);
        }
        
        .carousel-arrow i {
            width: 30px;
            height: 30px;
            transition: color 0.3s ease;
        }
        
        .carousel-arrow.prev {
            left: 20px;
        }
        
        .carousel-arrow.next {
            right: 20px;
        }
        
        /* Light mode specific arrow styles */
        body.light-mode .carousel-arrow {
            color: var(--accent-color);
        }
        
        body.light-mode .carousel-arrow:hover {
            color: var(--accent-dark);
        }
        
        /* Carousel Dots */
        .carousel-dots {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 10;
        }
        
        .carousel-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .carousel-dot.active {
            background-color: var(--accent-color);
            transform: scale(1.2);
        }
        
        .carousel-dot:hover {
            background-color: var(--accent-light);
        }
        
        /* Light mode specific dot styles */
        body.light-mode .carousel-dot {
            background-color: rgba(0, 0, 0, 0.3);
        }
        
        body.light-mode .carousel-dot.active {
            background-color: var(--accent-color);
        }
        
        body.light-mode .carousel-dot:hover {
            background-color: var(--accent-dark);
        }
        
        /* Theme toggle button */
        #theme-toggle, #theme-toggle-mobile {
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: background-color 0.3s;
        }
        
        #theme-toggle:hover, #theme-toggle-mobile:hover {
            background-color: rgba(212, 197, 163, 0.1);
        }
        
        body.light-mode #theme-toggle:hover,
        body.light-mode #theme-toggle-mobile:hover {
            background-color: rgba(165, 137, 90, 0.1);
        }
        
        .theme-icon-light, .theme-icon-dark {
            transition: opacity 0.3s;
        }
        
        /* Hide light icon in dark mode and dark icon in light mode */
        body:not(.light-mode) .theme-icon-light {
            display: none;
        }
        
        body.light-mode .theme-icon-dark {
            display: none;
        }
        
        /* Light mode specific adjustments */
        body.light-mode .nav-link {
            color: var(--text-color);
        }
        
        body.light-mode .nav-link.active, 
        body.light-mode .nav-link:hover {
            color: var(--accent-color);
        }
        
        body.light-mode .text-gray-400,
        body.light-mode .text-gray-300,
        body.light-mode .text-gray-200 {
            color: var(--text-color);
            opacity: 0.7;
        }
        
        body.light-mode .bg-gray-700 {
            background-color: var(--section-bg);
        }
        
        body.light-mode .bg-gray-600 {
            background-color: var(--border-color);
        }
        
        body.light-mode .bg-black {
            background-color: var(--modal-backdrop);
        }
        
        /* Enhanced Calendar */
        .calendar-day {
            transition: all 0.3s ease;
            border-radius: 50%;
        }
        
        .calendar-day:hover:not(.disabled) {
            background-color: var(--accent-color);
            color: #000;
        }
        
        .calendar-day.selected {
            background-color: var(--accent-color);
            color: #000;
            font-weight: bold;
        }
        
        .calendar-day.today {
            background-color: var(--accent-light);
            color: #000;
        }
        
        /* Section backgrounds */
        .section-bg {
            background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
        }
        
        /* Starfield background */
        .starfield {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }
        
        .star {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            animation: twinkle 5s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }
        
        /* Glow effect */
        .glow {
            box-shadow: 0 0 20px rgba(212, 197, 163, 0.3);
        }
        
        /* Logo styles - remove any background or border */
        .logo {
            border: none !important;
            background: transparent !important;
            box-shadow: none !important;
        }
        
        /* Mobile responsiveness for carousel arrows */
        @media (max-width: 768px) {
            .carousel-arrow {
                width: 40px;
                height: 40px;
            }
            
            .carousel-arrow i {
                width: 24px;
                height: 24px;
            }
            
            .carousel-arrow.prev {
                left: 10px;
            }
            
            .carousel-arrow.next {
                right: 10px;
            }
            
            .carousel-dots {
                bottom: 15px;
            }
        }

        /* Improved formatting for AI-generated content */
        .ai-content {
            line-height: 1.6;
            white-space: pre-wrap;
            text-align: left;
        }
        
        .ai-content h3, .ai-content h4 {
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
        }
        
        .ai-content p {
            margin-bottom: 1rem;
        }
        
        .ai-content ul, .ai-content ol {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .ai-content li {
            margin-bottom: 0.5rem;
        }
        
        .ai-content strong {
            color: var(--accent-color);
        }
        
        .ai-content em {
            opacity: 0.8;
        }
        
        /* --- REDESIGNED Facebook Posts Styling --- */
        .facebook-posts-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        /* Latest Post Row */
        .latest-post-row {
            display: flex;
            justify-content: center;
        }

        .latest-post {
            width: 100%;
            /* ADJUSTMENT: Increased width */
            max-width: 1100px;
            text-align: left;
        }

        .latest-post .facebook-post {
            padding: 2rem;
        }

        .latest-post .post-header {
            margin-bottom: 1.5rem;
        }

        .latest-post .post-content {
            /* ADJUSTMENT: Reduced height */
            max-height: 150px;
            overflow: hidden;
            position: relative;
        }

        .latest-post .post-content.expanded {
            max-height: none;
        }

        .latest-post .post-content::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(to bottom, transparent 0%, var(--card-bg) 100%);
            opacity: 1;
            transition: opacity 0.3s ease;
        }

        .latest-post .post-content.expanded::after {
            opacity: 0;
        }

        .latest-post .see-more-btn {
            background: none;
            border: none;
            color: var(--accent-color);
            font-weight: 600;
            cursor: pointer;
            margin-top: 0.5rem;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            transition: all 0.2s ease;
        }

        .latest-post .see-more-btn:hover {
            opacity: 0.8;
            text-decoration: underline;
        }

        .latest-post .post-image-container {
            margin-top: 1.5rem;
            border-radius: 12px;
            overflow: hidden;
        }

        .latest-post .post-footer {
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-color);
        }

        /* Older Posts Row */
        .older-posts-row {
            display: flex;
            justify-content: center;
        }

        .older-posts-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1.5rem;
            width: 100%;
            /* ADJUSTMENT: Cover more area */
            max-width: 100%;
        }
        
        .older-post {
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .older-post .facebook-post {
            padding: 1.5rem;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .older-post .post-header {
            margin-bottom: 1rem;
        }
        
        /* NEW: Styles for the image container in older posts */
        .older-post-image-container {
            margin-bottom: 1rem;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }
        
        .older-post-image-container img {
            width: 100%;
            height: 128px; /* 8rem */
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .older-post-image-container:hover img {
            transform: scale(1.05);
        }

        .older-post .post-content {
            flex-grow: 1;
            /* ADJUSTMENT: Increased content visibility */
            max-height: 180px;
            overflow: hidden;
            position: relative;
        }

        .older-post .post-content::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            /* ADJUSTMENT: Increased gradient height */
            height: 50px;
            background: linear-gradient(to bottom, transparent 0%, var(--card-bg) 100%);
        }

        .older-post .post-footer {
            margin-top: auto; /* Push footer to the bottom */
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }

        .older-post .view-post-btn {
            width: 100%;
            padding: 0.5rem;
            font-size: 0.875rem;
        }

        /* CTA Section */
        .facebook-cta-section {
            display: flex;
            justify-content: center;
            margin-top: 2rem;
        }

        .facebook-cta {
            text-align: center;
            padding: 2.5rem;
            border-radius: 20px;
            max-width: 600px;
            width: 100%;
            background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
        }

        .facebook-cta p {
            margin-bottom: 1.5rem;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .older-posts-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 1.25rem;
            }
        }

        @media (max-width: 768px) {
            .latest-post .facebook-post {
                padding: 1.5rem;
            }

            .older-posts-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }
        }

        @media (max-width: 480px) {
            .older-posts-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .facebook-cta {
                padding: 2rem 1.5rem;
            }
        }

        /* General Facebook Post Styles */
        .facebook-post.themed-card {
            text-align: left;
            border-radius: 16px;
        }
        
        .facebook-post.themed-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-color);
        }

        .post-header img {
            object-fit: cover;
        }

        .post-content {
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .post-footer .themed-btn i {
            color: inherit;
        }

    </style>
</head>
<body class="antialiased">
    <div class="starfield" id="starfield"></div>

    <header id="header" class="fixed top-0 left-0 right-0 z-50 backdrop-blur-lg border-b transition-colors duration-300" 
            style="background-color: var(--header-bg); border-color: var(--border-color);">
        <div id="header-container" class="container mx-auto px-6 py-4 flex justify-between items-center transition-all duration-300">
            <a href="#home" class="text-2xl font-bold font-serif flex items-center gap-4" data-section="home">
                <img src="images/logo.png" alt="LightHouse Astro Logo" class="h-16 w-16 object-contain logo">
                <span class="gradient-text">LightHouse Astro</span>
            </a>
            <nav class="hidden md:flex items-center space-x-8">
                <a href="#home" class="nav-link active" data-section="home">Home</a>
                <a href="#booking" class="nav-link" data-section="booking">Booking</a>
                <a href="#contact" class="nav-link" data-section="contact">Contact Us</a>
                <a href="#about" class="nav-link" data-section="about">About Us</a>
                <button id="theme-toggle" class="p-2 rounded-full">
                    <i class="theme-icon-light" data-lucide="sun" class="w-5 h-5" style="color: var(--accent-color);"></i>
                    <i class="theme-icon-dark" data-lucide="moon" class="w-5 h-5" style="color: var(--accent-color);"></i>
                </button>
            </nav>
            <div class="flex items-center gap-4">
                <button id="theme-toggle-mobile" class="md:hidden p-2 rounded-full">
                    <i class="theme-icon-light" data-lucide="sun" class="w-5 h-5" style="color: var(--accent-color);"></i>
                    <i class="theme-icon-dark" data-lucide="moon" class="w-5 h-5" style="color: var(--accent-color);"></i>
                </button>
                <button id="mobile-menu-button" class="md:hidden" style="color: var(--accent-color);">
                    <i data-lucide="menu"></i>
                </button>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 space-y-2 border-t transition-colors duration-300"
             style="background-color: var(--header-bg); border-color: var(--border-color);">
            <a href="#home" class="block py-2 nav-link active" data-section="home">Home</a>
            <a href="#booking" class="block py-2 nav-link" data-section="booking">Booking</a>
            <a href="#contact" class="block py-2 nav-link" data-section="contact">Contact Us</a>
            <a href="#about" class="block py-2 nav-link" data-section="about">About Us</a>
        </div>
    </header>

    <main class="pt-28">
        <section id="home" class="page-section active-section">
            <div id="hero-carousel" class="container mx-auto px-6 relative overflow-hidden">
                <button class="carousel-arrow prev">
                    <i data-lucide="chevron-left" class="w-8 h-8"></i>
                </button>
                <button class="carousel-arrow next">
                    <i data-lucide="chevron-right" class="w-8 h-8"></i>
                </button>
                
                <div class="carousel-slide active">
                    <img src="images/hero1.jpg" class="absolute inset-0 w-full h-full object-cover -z-10" alt="Galaxy background">
                    <div class="relative z-10 h-full flex flex-col items-center justify-center text-center p-6">
                        <h1 class="text-4xl md:text-6xl font-bold font-serif leading-tight text-white" id="carousel-title-1">Discover Your Cosmic Blueprint</h1>
                        <p class="mt-4 text-lg max-w-2xl mx-auto text-white" id="carousel-desc-1">Unveil the secrets of the stars and navigate your life's journey with clarity and confidence.</p>
                        <a href="#booking" data-section="booking" class="mt-8 inline-block themed-btn py-3 px-8 rounded-full" id="carousel-cta-1">Book a Reading</a>
                    </div>
                </div>
                <div class="carousel-slide">
                     <img src="images/hero2.jpg" class="absolute inset-0 w-full h-full object-cover -z-10" alt="Person looking at stars">
                    <div class="relative z-10 h-full flex flex-col items-center justify-center text-center p-6">
                        <h1 class="text-4xl md:text-6xl font-bold font-serif leading-tight text-white" id="carousel-title-2">Unlock Your Potential</h1>
                        <p class="mt-4 text-lg max-w-2xl mx-auto text-white" id="carousel-desc-2">Learn more about our philosophy and how we can help you on your journey of self-discovery.</p>
                        <a href="#about" data-section="about" class="mt-8 inline-block themed-btn py-3 px-8 rounded-full" id="carousel-cta-2">Learn More</a>
                    </div>
                </div>
                 <div class="carousel-slide">
                     <img src="images/hero3.jpg" class="absolute inset-0 w-full h-full object-cover -z-10" alt="Astrology chart and crystals">
                    <div class="relative z-10 h-full flex flex-col items-center justify-center text-center p-6">
                        <h1 class="text-4xl md:text-6xl font-bold font-serif leading-tight text-white" id="carousel-title-3">Schedule a Free Analysis</h1>
                        <p class="mt-4 text-lg max-w-2xl mx-auto text-white" id="carousel-desc-3">Connect with our expert astrologer for a complimentary 1-hour session to explore your birth chart.</p>
                        <a href="#booking" data-section="booking" class="mt-8 inline-block themed-btn py-3 px-8 rounded-full" id="carousel-cta-3">Book Your Free Trial</a>
                    </div>
                </div>
                
                <div class="carousel-dots">
                    <div class="carousel-dot active" data-slide="0"></div>
                    <div class="carousel-dot" data-slide="1"></div>
                    <div class="carousel-dot" data-slide="2"></div>
                </div>
            </div>

            <div class="py-20 section-bg">
                <div class="container mx-auto px-6">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl md:text-4xl font-bold" id="features-title">Your Personal Astrology Hub</h2>
                        <p class="mt-2 transition-colors duration-300" style="color: var(--text-color); opacity: 0.7;" id="features-subtitle">Everything you need to explore your celestial identity.</p>
                    </div>
                    <div class="grid md:grid-cols-3 gap-8" id="features-container">
                    </div>
                </div>
            </div>
            
            <div class="py-20">
                <div class="container mx-auto px-6 grid md:grid-cols-2 gap-12 items-center">
                    <div>
                        <h2 class="text-3xl md:text-4xl font-bold leading-snug" id="astrology-title">Astrology: The Language of the Cosmos</h2>
                        <p class="mt-4 leading-relaxed transition-colors duration-300" style="color: var(--text-color); opacity: 0.8;" id="astrology-description"></p>
                        <a href="#about" data-section="about" class="mt-6 inline-block font-semibold hover:underline transition-colors duration-300" style="color: var(--accent-color);" id="astrology-cta">Learn more about our philosophy &rarr;</a>
                    </div>
                    <div>
                         <img src="https://images.unsplash.com/photo-1534796636912-3b95b3ab5986?q=80&w=2071&auto=format&fit=crop"
                                 onerror="this.onerror=null;this.src='https://placehold.co/600x400/0F0F1A/A78BFA?text=Cosmic+Alignments';"
                                 class="rounded-2xl shadow-2xl object-cover w-full h-full themed-card" alt="Cosmic Alignments">
                    </div>
                </div>
            </div>

            <!-- REDESIGNED Facebook Posts Section -->
            <div class="py-20 section-bg">
                <div class="container mx-auto px-6">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl md:text-4xl font-bold" id="facebook-title">Latest Cosmic Updates</h2>
                        <p class="mt-2 max-w-xl mx-auto transition-colors duration-300" style="color: var(--text-color); opacity: 0.8;" id="facebook-description">Follow our journey and get the latest insights on our Facebook page.</p>
                    </div>
                    
                    <div id="facebook-posts-container" class="facebook-posts-container">
                        <div class="text-center py-8">
                            <p>Loading latest cosmic updates...</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="booking" class="page-section hidden-section">
            <div class="container mx-auto px-6 py-20">
                <div class="text-center mb-12">
                    <h1 class="text-4xl md:text-5xl font-bold font-serif">Book Your Consultation</h1>
                    <p class="mt-4 text-lg max-w-2xl mx-auto transition-colors duration-300" style="color: var(--text-color); opacity: 0.8;">Schedule your complimentary 1-hour analysis. Select a date and time that works for you.</p>
                </div>
        
                <div class="themed-card p-8 rounded-2xl max-w-5xl mx-auto">
                    <h2 class="text-3xl font-bold text-center mb-2" id="booking-title">Schedule Your Free Trial Analysis</h2>
                    <p class="text-center transition-colors duration-300" style="color: var(--text-color); opacity: 0.7;" id="booking-description">All times are in your local timezone.</p>
                    
                    <div class="grid md:grid-cols-2 gap-8 mt-8">
                        <div id="calendar-container">
                             <div class="flex justify-between items-center mb-4">
                                 <button id="prev-month" class="p-2 rounded-full transition-colors duration-300 hover:opacity-70"><i data-lucide="chevron-left"></i></button>
                                 <h3 id="month-year" class="text-xl font-semibold transition-colors duration-300" style="color: var(--text-color);"></h3>
                                 <button id="next-month" class="p-2 rounded-full transition-colors duration-300 hover:opacity-70"><i data-lucide="chevron-right"></i></button>
                             </div>
                            <div class="grid grid-cols-7 gap-1 text-center font-semibold transition-colors duration-300" style="color: var(--text-color); opacity: 0.7;">
                                <div>Su</div><div>Mo</div><div>Tu</div><div>We</div><div>Th</div><div>Fr</div><div>Sa</div>
                            </div>
                            <div id="calendar-grid" class="grid grid-cols-7 gap-1 mt-2">
                            </div>
                        </div>
                        <div id="time-slots" class="hidden">
                            <h3 class="text-xl font-semibold mb-4 transition-colors duration-300" style="color: var(--text-color);">Available Times on <span id="selected-date-text"></span></h3>
                            <div id="time-grid" class="grid grid-cols-2 gap-4">
                            </div>
                            <p id="booking-confirmation" class="mt-4 text-center font-semibold hidden" style="color: #10B981;"></p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact" class="page-section hidden-section">
             <div class="container mx-auto px-6 py-20">
                <div class="text-center mb-12">
                    <h1 class="text-4xl md:text-5xl font-bold font-serif">Contact Us</h1>
                    <p class="mt-4 text-lg max-w-2xl mx-auto transition-colors duration-300" style="color: var(--text-color); opacity: 0.8;">Have questions? We'd love to hear from you. Check our FAQs or send us a message directly.</p>
                </div>

                <div class="mt-12">
                      <h2 class="text-3xl font-bold text-center mb-8">Frequently Asked Questions</h2>
                      <div id="faq-container" class="max-w-3xl mx-auto space-y-4">
                      </div>
                </div>

                 <div class="mt-20 max-w-3xl mx-auto themed-card p-8 rounded-2xl">
                      <h2 class="text-3xl font-bold text-center mb-8" id="contact-form-title">Have a Question?</h2>
                      <form id="contact-form">
                          <div class="grid md:grid-cols-2 gap-6">
                              <input type="text" name="name" placeholder="Your Name" class="w-full p-3 rounded-lg transition-colors duration-300 themed-card" 
                                     style="color: var(--text-color);" required>
                              <input type="email" name="email" placeholder="Your Email" class="w-full p-3 rounded-lg transition-colors duration-300 themed-card" 
                                     style="color: var(--text-color);" required>
                          </div>
                          <textarea name="message" placeholder="Your Message" rows="5" class="w-full p-3 rounded-lg mt-6 transition-colors duration-300 themed-card" 
                                    style="color: var(--text-color);" required></textarea>
                         
                          <div class="flex justify-center my-6">
                              <div id="recaptcha-container"></div>
                          </div>

                          <button type="submit" class="w-full mt-6 themed-btn py-3 rounded-lg">Send Message</button>
                      </form>
                      <p id="response-message" class="text-center mt-4 h-6 font-semibold"></p>
                 </div>
            </div>
        </section>

        <section id="about" class="page-section hidden-section">
             <div class="container mx-auto px-6 py-20">
                <div class="text-center mb-16">
                    <h1 class="text-4xl md:text-5xl font-bold font-serif">Guiding Your Path with Celestial Wisdom</h1>
                    <p class="mt-4 text-lg max-w-3xl mx-auto transition-colors duration-300" style="color: var(--text-color); opacity: 0.8;">LightHouse Astro was founded on the belief that the stars offer a powerful map for self-discovery, personal growth, and understanding our place in the universe.</p>
                </div>
                
                 <div class="py-20">
                     <div class="text-center mb-12">
                          <h2 class="text-3xl md:text-4xl font-bold">Meet Our Astrologer</h2>
                          <p class="mt-2 transition-colors duration-300" style="color: var(--text-color); opacity: 0.7;">A certified professional dedicated to your journey.</p>
                      </div>
                     <div class="flex justify-center">
                          <div class="text-center">
                              <img src=""
                                   onerror="this.onerror=null;this.src='https://placehold.co/120x120/1A1A2E/A78BFA?text=AG';"
                                   class="rounded-full w-32 h-32 object-cover mx-auto shadow-lg border-2 themed-card" style="border-color: var(--accent-color);" alt="Astrologer Amit Gupta">
                              <h3 class="text-xl font-semibold mt-4 transition-colors duration-300" style="color: var(--text-color);">Amit Gupta</h3>
                              <p class="transition-colors duration-300" style="color: var(--accent-color);">Founder & Lead Astrologer</p>
                          </div>
                     </div>
                </div>

                  <div class="py-20 border-t transition-colors duration-300" style="border-color: var(--border-color);">
                      <div class="text-center mb-12">
                          <h2 class="text-3xl md:text-4xl font-bold">From Our Blog</h2>
                          <p class="mt-2 transition-colors duration-300" style="color: var(--text-color); opacity: 0.7;">Latest insights and news from the celestial world.</p>
                      </div>
                      <div class="grid md:grid-cols-3 gap-8" id="blog-container">
                      </div>
                  </div>

            </div>
        </section>

    </main>

    <footer class="border-t transition-colors duration-300" style="background-color: var(--header-bg); border-color: var(--border-color);">
        <div class="container mx-auto px-6 py-12">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center gap-3">
                        <img src="images/logo.png" alt="LightHouse Astro Logo" class="h-12 w-12 object-contain logo">
                        <h3 class="text-lg font-semibold transition-colors duration-300" style="color: var(--text-color);">LightHouse Astro</h3>
                    </div>
                    <p class="mt-2 transition-colors duration-300" style="color: var(--text-color); opacity: 0.7;">Your guide in the stars.</p>
                </div>
                <div>
                    <h3 class="text-lg font-semibold transition-colors duration-300" style="color: var(--text-color);">Quick Links</h3>
                    <ul class="mt-2 space-y-2">
                        <li><a href="#home" data-section="home" class="transition-colors duration-300 hover:opacity-100" style="color: var(--text-color); opacity: 0.7;">Home</a></li>
                        <li><a href="#booking" data-section="booking" class="transition-colors duration-300 hover:opacity-100" style="color: var(--text-color); opacity: 0.7;">Booking</a></li>
                        <li><a href="#contact" data-section="contact" class="transition-colors duration-300 hover:opacity-100" style="color: var(--text-color); opacity: 0.7;">Contact Us</a></li>
                        <li><a href="#about" data-section="about" class="transition-colors duration-300 hover:opacity-100" style="color: var(--text-color); opacity: 0.7;">About Us</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold transition-colors duration-300" style="color: var(--text-color);">Legal</h3>
                    <ul class="mt-2 space-y-2">
                        <li><a href="#" class="transition-colors duration-300 hover:opacity-100" style="color: var(--text-color); opacity: 0.7;">Privacy Policy</a></li>
                        <li><a href="#" class="transition-colors duration-300 hover:opacity-100" style="color: var(--text-color); opacity: 0.7;">Terms of Service</a></li>
                    </ul>
                </div>
                 <div>
                    <h3 class="text-lg font-semibold transition-colors duration-300" style="color: var(--text-color);">Connect</h3>
                    <div class="flex mt-2 space-x-4">
                        <a href="https://x.com/lighthouseastro" target="_blank" class="transition-colors duration-300 hover:opacity-100" style="color: var(--text-color); opacity: 0.7;"><i data-lucide="twitter"></i></a>
                        <a href="https://www.instagram.com/lighthouseastrology" target="_blank" class="transition-colors duration-300 hover:opacity-100" style="color: var(--text-color); opacity: 0.7;"><i data-lucide="instagram"></i></a>
                        <a href="https://www.facebook.com/profile.php?id=61557839980237" target="_blank" class="transition-colors duration-300 hover:opacity-100" style="color: var(--text-color); opacity: 0.7;"><i data-lucide="facebook"></i></a>
                        <a href="mailto:lighthouseastro@gmail.com?subject=Astrology%20Inquiry&body=Hello,%20I%20want%20to%20know%20more%20about..." class="transition-colors duration-300 hover:opacity-100" style="color: var(--text-color); opacity: 0.7;"><i data-lucide="mail"></i></a>
                    </div>
                </div>
            </div>
            <div class="mt-8 border-t pt-8 text-center transition-colors duration-300" style="border-color: var(--border-color); color: var(--text-color); opacity: 0.7;">
                <p>&copy; 2025 LightHouse Astro. All rights reserved.</p>
            </div>
        </div>
    </footer>
    
    <button id="scroll-to-top-btn" class="hidden fixed bottom-8 right-8 p-3 rounded-full shadow-lg hover:opacity-80 transition-opacity z-50 themed-btn">
        <i data-lucide="arrow-up"></i>
    </button>

    <script>
        // Global variables
        let heroCarouselInterval;
        let selectedDate = null;
        let currentSlide = 0;
        
        // =============================================================================
        // WEBSITE INITIALIZATION
        // =============================================================================
        
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
            initStarfield();
            initTheme();
            initNavigation();
            initHomePage();
            initContactPage();
            initScrollToTop();
            
            // Generate static content
            populateStaticContent();
            
            // Initialize Facebook posts
            initFacebookPosts();
        });
        
        // =============================================================================
        // FACEBOOK POSTS FUNCTIONALITY (REDESIGNED)
        // =============================================================================
        
        async function initFacebookPosts() {
            const facebookPostsContainer = document.getElementById('facebook-posts-container');
            const serverUrl = '/api'; // This is our local server URL

            try {
                // Ask our server for the posts
                const response = await fetch(serverUrl);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const posts = await response.json();
                
                // If we get posts, render them!
                renderFacebookPosts(posts);

            } catch (error) {
                console.error("Could not fetch Facebook posts:", error);
                // If something goes wrong, show a friendly message.
                facebookPostsContainer.innerHTML = `
                    <div class="col-span-full text-center py-8">
                        <p class="transition-colors duration-300" style="color: var(--text-color); opacity: 0.7;">
                            Could not load cosmic updates right now. Please check back later!
                        </p>
                    </div>
                `;
            }
        }
        
        function renderFacebookPosts(posts) {
            const container = document.getElementById('facebook-posts-container');
            const TRUNCATE_LIMIT = 280; // Character limit for "see more"

            if (!posts || posts.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8">
                        <p class="transition-colors duration-300" style="color: var(--text-color); opacity: 0.7;">No Facebook posts available at the moment.</p>
                    </div>
                `;
                return;
            }

            // Separate the latest post from the rest
            const latestPost = posts[0];
            const olderPosts = posts.slice(1, 6); // Get next 5 posts

            // Render latest post
            const latestPostHtml = renderLatestPost(latestPost);
            
            // Render older posts
            const olderPostsHtml = renderOlderPosts(olderPosts);
            
            // Render CTA section
            const ctaHtml = renderCtaSection();
            
            // Combine all sections
            container.innerHTML = `
                <div class="latest-post-row">
                    ${latestPostHtml}
                </div>
                <div class="older-posts-row">
                    ${olderPostsHtml}
                </div>
                <div class="facebook-cta-section">
                    ${ctaHtml}
                </div>
            `;

            lucide.createIcons(); // Re-render icons for new elements
            initSeeMoreButtons(); // Attach event listeners to new "see more" buttons
        }
        
        function renderLatestPost(post) {
            if (!post) return '';
            
            const postDate = new Date(post.created_time).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
            const postId = `latest-post`;

            return `
                <div class="latest-post">
                    <div id="${postId}" class="facebook-post themed-card rounded-2xl">
                        <!-- Post Header -->
                        <div class="post-header flex items-center gap-3">
                            <img src="images/logo.png" alt="LightHouse Astro" class="h-14 w-14 rounded-full border-2" style="border-color: var(--border-color);">
                            <div>
                                <h3 class="text-lg font-semibold transition-colors duration-300" style="color: var(--text-color);">LightHouse Astro</h3>
                                <p class="text-sm transition-colors duration-300" style="color: var(--text-color); opacity: 0.7;">${postDate}</p>
                            </div>
                        </div>

                        <!-- Post Content -->
                        <div class="post-content ai-content" style="color: var(--text-color);">
                            <p>${post.message || ''}</p>
                        </div>
                        
                        <!-- See More Button -->
                        <button class="see-more-btn" data-post-id="${postId}">
                            <span>See More</span>
                            <i data-lucide="chevron-down" class="w-4 h-4"></i>
                        </button>

                        <!-- Post Image -->
                        ${post.image ? `
                            <div class="post-image-container">
                                <a href="${post.permalink_url}" target="_blank">
                                    <img src="${post.image}" alt="Facebook post image" class="w-full h-auto max-h-[500px] object-cover rounded-xl border" style="border-color: var(--border-color);">
                                </a>
                            </div>
                        ` : ''}

                        <!-- Post Footer -->
                        <div class="post-footer flex justify-end">
                            <a href="${post.permalink_url}" target="_blank" class="themed-btn text-sm py-2 px-4 rounded-full flex items-center gap-2">
                                <i data-lucide="facebook" class="w-4 h-4"></i>
                                <span>View on Facebook</span>
                            </a>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function renderOlderPosts(posts) {
            if (!posts || posts.length === 0) {
                return `
                    <div class="older-posts-grid">
                        <p class="text-center col-span-full py-8 transition-colors duration-300" style="color: var(--text-color); opacity: 0.7;">
                            No additional posts available at the moment.
                        </p>
                    </div>
                `;
            }

            const postsHtml = posts.map((post, index) => {
                const postDate = new Date(post.created_time).toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                const postId = `older-post-${index}`;
                
                // Truncate message for preview
                const previewMessage = post.message ? 
                    (post.message.length > 150 ? post.message.substring(0, 150) + '...' : post.message) 
                    : '';

                return `
                    <div class="older-post">
                        <div id="${postId}" class="facebook-post themed-card rounded-2xl">
                            <!-- Post Header -->
                            <div class="post-header flex items-center gap-2">
                                <img src="images/logo.png" alt="LightHouse Astro" class="h-10 w-10 rounded-full border" style="border-color: var(--border-color);">
                                <div>
                                    <h3 class="text-sm font-semibold transition-colors duration-300" style="color: var(--text-color);">LightHouse Astro</h3>
                                    <p class="text-xs transition-colors duration-300" style="color: var(--text-color); opacity: 0.7;">${postDate}</p>
                                </div>
                            </div>

                            <!-- NEW: Post Image -->
                            ${post.image ? `
                                <div class="older-post-image-container">
                                    <a href="${post.permalink_url}" target="_blank">
                                        <img src="${post.image}" alt="Facebook post image">
                                    </a>
                                </div>
                            ` : ''}

                            <!-- Post Content -->
                            <div class="post-content ai-content" style="color: var(--text-color);">
                                <p class="text-sm">${previewMessage}</p>
                            </div>

                            <!-- Post Footer -->
                            <div class="post-footer">
                                <a href="${post.permalink_url}" target="_blank" class="view-post-btn themed-btn text-xs rounded-full flex items-center justify-center gap-1">
                                    <i data-lucide="facebook" class="w-3 h-3"></i>
                                    <span>View Post</span>
                                </a>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            return `
                <div class="older-posts-grid">
                    ${postsHtml}
                </div>
            `;
        }
        
        function renderCtaSection() {
            return `
                <div class="facebook-cta themed-card">
                    <i data-lucide="facebook" class="w-12 h-12 mx-auto mb-4" style="color: var(--accent-color);"></i>
                    <p class="max-w-xl mx-auto mb-6 transition-colors duration-300" style="color: var(--text-color); opacity: 0.8;">
                        Visit our Facebook page to explore more posts, connect with us, and get the latest updates!
                    </p>
                    <a href="https://www.facebook.com/profile.php?id=61557839980237" target="_blank" class="themed-btn py-3 px-8 rounded-full inline-block">
                        Go to Facebook
                    </a>
                </div>
            `;
        }
        
        function initSeeMoreButtons() {
            document.querySelectorAll('.see-more-btn').forEach(button => {
                button.addEventListener('click', () => {
                    const postId = button.dataset.postId;
                    const postElement = document.getElementById(postId);
                    if (postElement) {
                        const contentElement = postElement.querySelector('.post-content');
                        const isExpanded = contentElement.classList.contains('expanded');
                        const icon = button.querySelector('i');
                        
                        if (isExpanded) {
                            contentElement.classList.remove('expanded');
                            button.innerHTML = '<span>See More</span><i data-lucide="chevron-down" class="w-4 h-4"></i>';
                        } else {
                            contentElement.classList.add('expanded');
                            button.innerHTML = '<span>See Less</span><i data-lucide="chevron-up" class="w-4 h-4"></i>';
                        }
                        
                        lucide.createIcons(); // Re-render icons
                    }
                });
            });
        }
        
        // =============================================================================
        // ALL OTHER ORIGINAL JAVASCRIPT FUNCTIONS (UNCHANGED)
        // =============================================================================
        
        function initStarfield() {
            const starfield = document.getElementById('starfield');
            const starsCount = 150;
            
            for (let i = 0; i < starsCount; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                
                const x = Math.random() * 100;
                const y = Math.random() * 100;
                const size = Math.random() * 3;
                const delay = Math.random() * 5;
                
                star.style.left = `${x}%`;
                star.style.top = `${y}%`;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.animationDelay = `${delay}s`;
                
                starfield.appendChild(star);
            }
        }
        
        function initTheme() {
            const themeToggle = document.getElementById('theme-toggle');
            const themeToggleMobile = document.getElementById('theme-toggle-mobile');
            const savedTheme = localStorage.getItem('theme') || 'dark';
            
            if (savedTheme === 'light') {
                document.body.classList.add('light-mode');
            }
            
            themeToggle.addEventListener('click', toggleTheme);
            if (themeToggleMobile) {
                themeToggleMobile.addEventListener('click', toggleTheme);
            }
        }
        
        function toggleTheme() {
            const isLightMode = document.body.classList.toggle('light-mode');
            localStorage.setItem('theme', isLightMode ? 'light' : 'dark');
            lucide.createIcons();
            renderRecaptcha();
        }
        
        function initNavigation() {
            const navLinks = document.querySelectorAll('.nav-link, [data-section]');
            const sections = document.querySelectorAll('.page-section');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            
            function switchPage(targetId) {
                sections.forEach(section => {
                    section.classList.toggle('active-section', section.id === targetId);
                    section.classList.toggle('hidden-section', section.id !== targetId);
                });
                
                document.querySelectorAll('.nav-link').forEach(link => {
                     link.classList.remove('active');
                     if(link.dataset.section === targetId){
                          link.classList.add('active');
                     }
                });
                
                window.scrollTo(0, 0);
                mobileMenu.classList.add('hidden');
            }
            
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = e.currentTarget.dataset.section;
                    if (targetId) {
                        switchPage(targetId);
                    }
                });
            });
            
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            const headerContainer = document.getElementById('header-container');
            window.addEventListener('scroll', () => {
                if(window.scrollY > 50) {
                    headerContainer.classList.add('py-3');
                    headerContainer.classList.remove('py-4');
                } else {
                    headerContainer.classList.add('py-4');
                    headerContainer.classList.remove('py-3');
                }
            });
            
            // Make switchPage function globally available
            window.switchPage = switchPage;
        }
        
        function initHomePage() {
            // Hero Carousel
            const slides = document.querySelectorAll('.carousel-slide');
            const dots = document.querySelectorAll('.carousel-dot');
            const prevBtn = document.querySelector('.carousel-arrow.prev');
            const nextBtn = document.querySelector('.carousel-arrow.next');
            
            function showSlide(index) {
                slides.forEach((slide, i) => slide.classList.toggle('active', i === index));
                dots.forEach((dot, i) => {
                    dot.classList.toggle('active', i === index);
                });
                currentSlide = index;
            }
            
            dots.forEach(dot => {
                dot.addEventListener('click', (e) => {
                    const slideIndex = parseInt(e.target.dataset.slide);
                    showSlide(slideIndex);
                    resetCarouselInterval();
                });
            });
            
            prevBtn.addEventListener('click', () => {
                showSlide((currentSlide - 1 + slides.length) % slides.length);
                resetCarouselInterval();
            });
            
            nextBtn.addEventListener('click', () => {
                showSlide((currentSlide + 1) % slides.length);
                resetCarouselInterval();
            });
            
            function nextSlide() {
                showSlide((currentSlide + 1) % slides.length);
            }
            
            function resetCarouselInterval() {
                clearInterval(heroCarouselInterval);
                heroCarouselInterval = setInterval(nextSlide, 5000);
            }
            
            heroCarouselInterval = setInterval(nextSlide, 5000);
            showSlide(0);
        }

        function initContactPage() {
            const calendarGrid = document.getElementById('calendar-grid');
            const monthYearEl = document.getElementById('month-year');
            const prevMonthBtn = document.getElementById('prev-month');
            const nextMonthBtn = document.getElementById('next-month');
            const timeSlotsContainer = document.getElementById('time-slots');
            const timeGrid = document.getElementById('time-grid');
            const selectedDateText = document.getElementById('selected-date-text');
            const bookingConfirmation = document.getElementById('booking-confirmation');
            
            let date = new Date();
            
            function renderCalendar() {
                date.setDate(1);
                const monthDays = new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();
                const firstDayIndex = date.getDay();
                
                monthYearEl.innerText = date.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
                calendarGrid.innerHTML = '';
                
                for (let i = 0; i < firstDayIndex; i++) {
                    calendarGrid.innerHTML += `<div></div>`;
                }
                
                for (let i = 1; i <= monthDays; i++) {
                    const dayEl = document.createElement('div');
                    dayEl.innerText = i;
                    const thisDate = new Date(date.getFullYear(), date.getMonth(), i);
                    const today = new Date();
                    today.setHours(0,0,0,0);
                    
                    let classes = 'p-2 text-center rounded-full calendar-day ';
                    if (thisDate >= today) {
                        classes += 'cursor-pointer hover:opacity-70';
                         dayEl.addEventListener('click', () => selectDate(dayEl, i));
                    } else {
                        classes += 'opacity-50 cursor-not-allowed disabled';
                    }
                    
                    if (date.getFullYear() === new Date().getFullYear() && 
                        date.getMonth() === new Date().getMonth() && 
                        i === new Date().getDate()) {
                        classes += ' today';
                    }
                    
                    if (selectedDate && 
                        date.getFullYear() === selectedDate.getFullYear() && 
                        date.getMonth() === selectedDate.getMonth() && 
                        i === selectedDate.getDate()) {
                        classes += ' selected';
                    }
                    
                    dayEl.className = classes;
                    calendarGrid.appendChild(dayEl);
                }
            }
            
            function selectDate(dayEl, day) {
                document.querySelectorAll('.calendar-day').forEach(el => {
                    el.classList.remove('selected');
                });
                
                dayEl.classList.add('selected');
                selectedDate = new Date(date.getFullYear(), date.getMonth(), day);
                showTimeSlots(day);
            }
            
            function showTimeSlots(day) {
                timeSlotsContainer.classList.remove('hidden');
                selectedDateText.innerText = new Date(date.getFullYear(), date.getMonth(), day).toLocaleDateString();
                timeGrid.innerHTML = '';
                bookingConfirmation.classList.add('hidden');
                
                const timeSlots = ['09:00 AM', '10:00 AM', '11:00 AM', '02:00 PM', '03:00 PM', '04:00 PM'];
                
                timeSlots.forEach(time => {
                    const timeBtn = document.createElement('button');
                    timeBtn.innerText = time;
                    timeBtn.className = 'p-3 rounded-lg hover:opacity-80 transition themed-btn';
                    timeBtn.addEventListener('click', () => {
                        bookingConfirmation.innerText = `Confirmed! Your trial is booked for ${selectedDateText.innerText} at ${time}. Check your email!`;
                        bookingConfirmation.classList.remove('hidden');
                    });
                    timeGrid.appendChild(timeBtn);
                });
            }
            
            prevMonthBtn.addEventListener('click', () => {
                date.setMonth(date.getMonth() - 1);
                renderCalendar();
            });
            nextMonthBtn.addEventListener('click', () => {
                date.setMonth(date.getMonth() + 1);
                renderCalendar();
            });
            
            renderCalendar();
            
            renderRecaptcha();
            
            const form = document.getElementById('contact-form');
            const responseMessageEl = document.getElementById('response-message');
            const url = "https://script.google.com/macros/s/AKfycbw33G3AZEuxFF8zAPKjlJGMSciK-UkcPGnTZeAFFKTBDL9YFjJX4164zszl-3oYv62z/exec";
            
            if (form) {
                form.addEventListener("submit", async (e) => {
                    e.preventDefault();

                    const submitButton = form.querySelector('button[type="submit"]');

                    const captchaResponse = grecaptcha.getResponse();
                    if (!captchaResponse) {
                        responseMessageEl.textContent = "Please complete the CAPTCHA.";
                        responseMessageEl.style.color = '#EF4444';
                        return;
                    }

                    const name = form.elements['name'].value.trim();
                    const email = form.elements['email'].value.trim();
                    const message = form.elements['message'].value.trim();
                    if (!name || !email || !message) {
                        responseMessageEl.textContent = "Please fill in all required fields.";
                        responseMessageEl.style.color = '#EF4444';
                        return;
                    }

                    responseMessageEl.textContent = "Sending...";
                    responseMessageEl.style.color = 'var(--text-color)';
                    submitButton.disabled = true;

                    try {
                        const formData = new FormData(form);
                        const data = Object.fromEntries(formData.entries());

                        const response = await fetch('http://localhost:3000/api/messages', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(data),
                        });

                        if (response.ok) {
                            responseMessageEl.textContent = "Message sent successfully! We'll be in touch.";
                            responseMessageEl.style.color = '#10B981'; // Green for success
                            form.reset();
                            grecaptcha.reset();
                        } else {
                            throw new Error("Failed to send message. Please try again later.");
                        }
                    } catch (error) {
                        console.error("Contact form error:", error);
                        responseMessageEl.textContent = "An error occurred. Please try again.";
                        responseMessageEl.style.color = '#EF4444'; // Red for error
                    } finally {
                        submitButton.disabled = false;
                    }
                });
            }
        }
        
        function renderRecaptcha() {
            const container = document.getElementById('recaptcha-container');
            if (!container) return;
            
            container.innerHTML = '';
            
            const currentTheme = document.body.classList.contains('light-mode') ? 'light' : 'dark';
            
            const tryRender = () => {
                if (typeof grecaptcha !== 'undefined' && grecaptcha.render) {
                    grecaptcha.render(container, {
                        'sitekey': '6LexEOkqAAAAAEvnuHFUcV8Ub-IoDpRUeL40-ak4',
                        'theme': currentTheme
                    });
                } else {
                    setTimeout(tryRender, 100);
                }
            };
            tryRender();
        }
        
        function initScrollToTop() {
            const btn = document.getElementById('scroll-to-top-btn');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 300) {
                    btn.classList.remove('hidden');
                } else {
                    btn.classList.add('hidden');
                }
            });
            btn.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }
        
        // =============================================================================
        // STATIC CONTENT POPULATION (UNCHANGED)
        // =============================================================================
        
        function populateStaticContent() {
            // Home Page Features
            const featuresContainer = document.getElementById('features-container');
            if (featuresContainer) {
                const features = [
                    { title: "Personalized Readings", description: "Deep dive into your unique astrological blueprint with a one-on-one consultation." },
                    { title: "Contact & Booking", description: "Easily schedule your personal consultation through our integrated booking system." },
                    { title: "Learn About Us", description: "Discover our mission, our expert astrologer, and the services we offer to guide you." }
                ];
                featuresContainer.innerHTML = features.map(feature => `
                    <div class="p-8 text-center themed-card rounded-2xl">
                        <i data-lucide="star" class="w-16 h-16 mx-auto float" style="color: var(--accent-color);"></i>
                        <h3 class="text-xl font-semibold mt-4 transition-colors duration-300" style="color: var(--text-color);">${feature.title}</h3>
                        <p class="mt-2 transition-colors duration-300" style="color: var(--text-color); opacity: 0.7;">${feature.description}</p>
                    </div>
                `).join('');
            }
            
            // Home Page Astrology Description
            const astrologyDescElement = document.getElementById('astrology-description');
            if (astrologyDescElement) {
                astrologyDescElement.innerHTML = `
                    Astrology is an ancient practice that interprets the influence of celestial bodies on human affairs and the natural world. 
                    By analyzing the positions of planets and stars at the time of your birth, we can create a detailed birth charta unique 
                    cosmic map that reveals your personality, strengths, challenges, and life's potential. It's a tool for self-awareness, 
                    helping you navigate your journey with greater clarity and purpose.
                `;
            }

            // Blog Posts
            const blogContainer = document.getElementById('blog-container');
            if (blogContainer) {
                const posts = [
                    { title: "Understanding Your Sun, Moon, and Rising Signs", category: "Astrology 101", description: "A beginner's guide to the three most important placements in your birth chart.", img: "1446776811953-b23d579424c1" },
                    { title: "Navigating Venus Retrograde in Your Love Life", category: "Relationships", description: "Tips for handling communication and connection during this tricky transit.", img: "1522030299830-16b8d3d049fe" },
                    { title: "Using Lunar Cycles to Set Intentions", category: "Wellness", description: "How to align your goals with the New Moon and Full Moon for better results.", img: "1504333638930-c8787321eee0" }
                ];
                blogContainer.innerHTML = posts.map(post => `
                    <div class="themed-card rounded-2xl overflow-hidden group">
                        <img src="https://images.unsplash.com/photo-${post.img}?q=80&w=2072&auto=format&fit=crop" 
                             onerror="this.onerror=null;this.src='https://placehold.co/600x400/141424/A78BFA?text=${post.title.substring(0, 15)}...';"
                             class="w-full h-48 object-cover" alt="${post.title}">
                        <div class="p-6">
                            <p class="text-sm transition-colors duration-300" style="color: var(--accent-color);">${post.category}</p>
                            <h3 class="text-xl font-semibold mt-2 transition-colors duration-300 group-hover:opacity-70" style="color: var(--text-color);">${post.title}</h3>
                            <p class="mt-2 text-sm transition-colors duration-300" style="color: var(--text-color); opacity: 0.8;">${post.description}</p>
                        </div>
                    </div>
                `).join('');
            }
            
            // FAQs
            const faqContainer = document.getElementById('faq-container');
            if (faqContainer) {
                const faqs = [
                    { q: "Is astrology a science?", a: "Astrology is considered a metaphysical art or a form of divination, not a hard science. While it uses astronomical data, its interpretations are symbolic and aim to provide insight and guidance rather than empirically provable predictions." },
                    { q: "What do I need for a birth chart reading?", a: "For an accurate reading, you will need your exact date, time, and place of birth. The time is especially important as it determines your Ascendant (or Rising) sign, which influences your outer personality." },
                    { q: "How often should I get a reading?", a: "This is a personal choice. Some people benefit from annual readings (often around their birthday) to understand the year ahead, while others seek guidance during major life transitions or when facing specific challenges." },
                    { q: "Can astrology predict my future?", a: "Astrology doesn't predict specific events with certainty. Instead, it highlights potential energies, opportunities, and challenges that may arise, empowering you to make conscious choices. Think of it as a cosmic weather forecast, not a fixed destiny." },
                    { q: "What's the difference between a Sun sign and a Rising sign?", a: "Your Sun sign represents your core identity, ego, and life force. It's the sign most people know. Your Rising sign (or Ascendant) represents your social personality, the mask you wear in public, and how others perceive you upon first impression." }
                ];
                faqContainer.innerHTML = faqs.map(faq => `
                    <div class="themed-card rounded-lg shadow-sm overflow-hidden">
                        <button class="w-full flex justify-between items-center text-left p-4 font-semibold transition-colors duration-300" style="color: var(--text-color);">
                            <span>${faq.q}</span>
                            <i data-lucide="chevron-down" class="transition-transform duration-300"></i>
                        </button>
                        <div class="px-4 max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
                            <p class="pb-4 transition-colors duration-300 ai-content" style="color: var(--text-color); opacity: 0.8;">${faq.a}</p>
                        </div>
                    </div>
                `).join('');
                
                // Add FAQ toggle functionality
                faqContainer.querySelectorAll('button').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const content = btn.nextElementSibling;
                        const icon = btn.querySelector('i');
                        const isOpen = content.style.maxHeight && content.style.maxHeight !== '0px';
                        
                        if (isOpen) {
                            content.style.maxHeight = '0px';
                            icon.style.transform = 'rotate(0deg)';
                        } else {
                            content.style.maxHeight = content.scrollHeight + 'px';
                            icon.style.transform = 'rotate(180deg)';
                        }
                    });
                });
            }
            
            // Pricing Tiers (This section is now removed from About page, so this JS block won't find the container and won't run)
            const pricingContainer = document.getElementById('pricing-container');
            if (pricingContainer) {
                 const tiers = [
                       { name: "Free Trial", price: "0 / 0", period: "", features: ["1-Hour Analysis", "Basic Birth Chart", "Zodiac Profile"], cta: "Book Now", popular: false, link: "#contact", isFree: true},
                       { name: "Stargazer", price: "50 / 5000", period: "/ month", features: ["Full Natal Chart Reading", "Monthly Forecasts", "Email Support", "Compatibility Check"], cta: "Choose Plan", popular: true, isFree: false },
                       { name: "Cosmic Navigator", price: "120 / 12000", period: "/ quarter", features: ["Everything in Stargazer", "Quarterly Live Sessions", "Relationship Analysis", "Priority Support"], cta: "Choose Plan", popular: false, isFree: false }
                 ];
                pricingContainer.innerHTML = tiers.map(tier => `
                    <div class="p-8 rounded-2xl text-center themed-card ${tier.popular ? 'glow relative' : ''}">
                        ${tier.popular ? '<span class="absolute top-0 -translate-y-1/2 text-sm font-bold px-4 py-1 rounded-full themed-btn">Most Popular</span>' : ''}
                        <h3 class="text-2xl font-semibold transition-colors duration-300" style="color: var(--text-color);">${tier.name}</h3>
                        <p class="text-4xl font-bold my-4 transition-colors duration-300" style="color: var(--text-color);">${tier.price}<span class="text-lg font-normal transition-colors duration-300" style="color: var(--text-color); opacity: 0.7;">${tier.period}</span></p>
                        <ul class="space-y-3 transition-colors duration-300" style="color: var(--text-color); opacity: 0.8;">
                            ${tier.features.map(feature => `<li>${feature}</li>`).join('')}
                        </ul>
                        <button class="mt-6 w-full themed-btn py-3 rounded-lg pricing-btn" data-section="${tier.isFree ? 'booking' : ''}">${tier.cta}</button>
                    </div>
                `).join('');
                
                // Add event listener for pricing buttons
                document.querySelectorAll('.pricing-btn').forEach(button => {
                    if(button.dataset.section) {
                        button.addEventListener('click', () => switchPage(button.dataset.section));
                    }
                });
            }

            // Refresh all Lucide icons
            lucide.createIcons();
        }
    </script>
</body>
</html>